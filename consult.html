<!doctype html>
<html lang="ja" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>相談スタート｜drivers-site（山口県）</title>
  <meta name="description" content="どの相談から始めるか選び、内容をまとめてLINEの送信欄に下書きとして入れます。" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { deep: '#050505', muted: '#94A3B8' },
          fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="./drivers.css" />
  <script src="./config.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-deep text-white min-h-screen">
  <div id="top"></div>

  <header class="fixed top-0 w-full z-50 bg-deep/80 backdrop-blur-xl border-b border-white/5">
    <div class="header-inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="./index.html" class="flex items-center gap-3 group">
        <div class="hidden sm:flex flex-col items-center justify-center px-3 py-1 bg-white/5 border border-white/10 rounded-full">
          <span class="text-[9px] tracking-widest font-extrabold text-white/80">YAMAGUCHI</span>
          <span class="text-[9px] font-bold text-white/50">山口県</span>
        </div>
        <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-red-900 to-red-500 flex items-center justify-center shadow-lg shadow-red-900/30" aria-hidden="true">
          <span class="w-4 h-4 rounded-full border-2 border-white/90"></span>
        </div>
        <div>
          <div class="text-sm font-black tracking-wide leading-none" id="companyName">軽貨物TAKE</div>
          <div class="text-[10px] text-muted font-bold font-mono mt-0.5">DRIVERS SITE</div>
        </div>
      </a>

      <div class="flex items-center gap-4">
        <div class="hidden lg:flex items-center gap-3 text-xs text-muted" aria-label="連絡先">
          <a href="https://line.me/R/ti/p/%40277rcesk" id="headerLineLink" class="hover:text-white transition-colors" target="_blank" rel="noopener noreferrer">LINE</a>
          <span class="text-white/20">|</span>
          <a href="#" id="headerMailLink" class="hover:text-white transition-colors">メール</a>
        </div>

        <nav class="hidden md:flex gap-1" aria-label="メイン">
          <a href="./index.html" class="px-4 py-2 rounded-full text-xs font-bold text-muted hover:text-white hover:bg-white/5 transition-colors">トップ</a>
          <a href="./startup.html" class="px-4 py-2 rounded-full text-xs font-bold text-muted hover:text-white hover:bg-white/5 transition-colors">開業トータル相談</a>
          <a href="./vehicle.html" class="px-4 py-2 rounded-full text-xs font-bold text-muted hover:text-white hover:bg-white/5 transition-colors">車両の相談</a>
          <a href="./register.html" class="px-4 py-2 rounded-full text-xs font-bold text-muted hover:text-white hover:bg-white/5 transition-colors">仮登録</a>
          <a href="./consult.html" class="px-4 py-2 rounded-full text-xs font-bold bg-white text-black shadow-lg shadow-white/10" aria-current="page">相談スタート</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="pt-24 pb-16 px-4 sm:px-6 lg:px-8 max-w-4xl mx-auto">

    <div class="glass-card p-6 md:p-10 mb-6 reveal-hidden relative overflow-hidden">
      <div class="absolute -top-20 -right-20 w-[300px] h-[300px] bg-gradient-to-br from-green-600/15 to-transparent rounded-full blur-3xl pointer-events-none"></div>
      <div class="relative z-10">
        <div class="flex items-center gap-3 mb-4">
          <div class="p-2 rounded-lg bg-green-500/10 text-green-400">
            <i data-lucide="message-square" class="w-6 h-6"></i>
          </div>
          <h1 class="text-2xl sm:text-3xl font-black tracking-tight">相談スタート</h1>
        </div>
        <p class="text-sm sm:text-base text-muted leading-relaxed">
          選んだ内容＋備考をまとめて、LINEの送信欄に<strong class="text-white">下書き</strong>として入れます。送信ボタンはあなたが押します。
        </p>
      </div>
    </div>

    <div class="glass-card p-6 mb-6 reveal-hidden delay-100 relative overflow-hidden">
      <div class="absolute -bottom-10 -left-10 w-[200px] h-[200px] bg-gradient-to-tr from-white/5 to-transparent rounded-full blur-3xl pointer-events-none"></div>
      <div class="relative z-10">
        <div class="flex items-center gap-2 mb-3">
          <span class="px-2.5 py-0.5 rounded-full bg-green-500/10 text-green-400 text-[11px] font-bold">最優先</span>
          <span class="text-xs text-muted">協力ドライバー登録</span>
        </div>
        <h2 class="text-lg font-bold mb-2">まず登録フォームへ（1分）</h2>
        <p class="text-sm text-muted mb-4">登録が一番うれしいので、相談より先にここだけでもOKです。</p>
        <a class="inline-flex items-center gap-2 px-5 py-3 rounded-2xl bg-white text-black font-bold text-sm shadow-lg shadow-white/10 transition-all" href="./register.html">
          <i data-lucide="user-plus" class="w-4 h-4"></i> 協力ドライバー登録フォームへ
        </a>
      </div>
    </div>

    <div class="glass-card p-6 md:p-10 reveal-hidden delay-200" id="consultCard">
      <div class="flex items-center gap-3 mb-6">
        <div class="p-2 rounded-lg bg-sky-500/10 text-sky-400">
          <i data-lucide="list-checks" class="w-6 h-6"></i>
        </div>
        <h2 class="text-xl font-bold">LINEで相談（内容付き）</h2>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <section>
          <h3 class="text-sm font-bold text-muted uppercase tracking-wider mb-4 flex items-center gap-2">
            <span class="w-6 h-6 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[11px] font-bold">①</span>
            相談カテゴリを選ぶ
          </h3>

          <div class="space-y-2.5 mb-8">
            <label class="flex items-start gap-3 p-3 rounded-xl border border-white/10 bg-white/[0.03] cursor-pointer hover:bg-white/[0.06] hover:border-white/20 transition-all has-[:checked]:border-sky-500/50 has-[:checked]:bg-sky-500/5">
              <input type="radio" name="consultType" value="協力ドライバー登録について" checked class="mt-1 accent-sky-400">
              <span>
                <b class="text-sm text-white">協力ドライバー登録について</b><br>
                <span class="text-xs text-muted">登録の流れ／公開範囲／稼働条件など</span>
              </span>
            </label>
            <label class="flex items-start gap-3 p-3 rounded-xl border border-white/10 bg-white/[0.03] cursor-pointer hover:bg-white/[0.06] hover:border-white/20 transition-all has-[:checked]:border-sky-500/50 has-[:checked]:bg-sky-500/5">
              <input type="radio" name="consultType" value="開業トータル相談" class="mt-1 accent-sky-400">
              <span>
                <b class="text-sm text-white">開業トータル相談</b><br>
                <span class="text-xs text-muted">車両・黒ナンバー・保険・確定申告など全体整理</span>
              </span>
            </label>
            <label class="flex items-start gap-3 p-3 rounded-xl border border-white/10 bg-white/[0.03] cursor-pointer hover:bg-white/[0.06] hover:border-white/20 transition-all has-[:checked]:border-sky-500/50 has-[:checked]:bg-sky-500/5">
              <input type="radio" name="consultType" value="車両購入の相談" class="mt-1 accent-sky-400">
              <span>
                <b class="text-sm text-white">車両購入の相談</b><br>
                <span class="text-xs text-muted">おすすめ／予算／リース・中古／選び方</span>
              </span>
            </label>
            <label class="flex items-start gap-3 p-3 rounded-xl border border-white/10 bg-white/[0.03] cursor-pointer hover:bg-white/[0.06] hover:border-white/20 transition-all has-[:checked]:border-sky-500/50 has-[:checked]:bg-sky-500/5">
              <input type="radio" name="consultType" value="修理整備の相談" class="mt-1 accent-sky-400">
              <span>
                <b class="text-sm text-white">修理整備の相談</b><br>
                <span class="text-xs text-muted">症状／見積／整備先の相談</span>
              </span>
            </label>
            <label class="flex items-start gap-3 p-3 rounded-xl border border-white/10 bg-white/[0.03] cursor-pointer hover:bg-white/[0.06] hover:border-white/20 transition-all has-[:checked]:border-sky-500/50 has-[:checked]:bg-sky-500/5">
              <input type="radio" name="consultType" value="その他（クルマ相談）" class="mt-1 accent-sky-400">
              <span>
                <b class="text-sm text-white">その他（クルマ相談）</b><br>
                <span class="text-xs text-muted">車検・保険・名義・雑談まで</span>
              </span>
            </label>
          </div>

          <h3 class="text-sm font-bold text-muted uppercase tracking-wider mb-3 flex items-center gap-2">
            <span class="w-6 h-6 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[11px] font-bold">②</span>
            備考（自由入力）
          </h3>
          <textarea id="note" rows="6"
            class="w-full bg-white/[0.03] border border-white/10 rounded-xl p-4 text-sm text-white placeholder-white/30 focus:border-sky-500/50 focus:outline-none focus:ring-1 focus:ring-sky-500/20 transition-all resize-y"
            placeholder="例）&#10;・今の状況：未経験／準備中／稼働中&#10;・希望エリア：〇〇&#10;・予算感：〇〇&#10;・困っていること：〇〇&#10;（ここは例です。送信本文には混ざりません）"></textarea>

          <details class="mt-3 group">
            <summary class="text-xs text-muted cursor-pointer hover:text-white/60 transition-colors flex items-center gap-1 select-none">
              <i data-lucide="info" class="w-3 h-3"></i>
              相談例（参考・送信本文には入りません）
            </summary>
            <ul class="mt-2 space-y-1 text-xs text-muted pl-4">
              <li>• 開業に必要な手順を、最短で整理してほしい</li>
              <li>• 黒ナンバー取得の流れと必要書類を教えてほしい</li>
              <li>• 軽バン（中古/リース）のおすすめと相場感を知りたい</li>
              <li>• この症状（異音/警告灯）って修理必要？目安いくら？</li>
              <li>• 協力ドライバー登録の流れと公開範囲を確認したい</li>
            </ul>
          </details>

          <div class="flex flex-wrap gap-3 mt-6">
            <a class="inline-flex items-center gap-2 px-5 py-3 rounded-2xl border border-white/10 bg-white/5 text-white/80 font-bold text-sm hover:bg-white/10 transition-all" id="btnAddFriend" href="https://line.me/R/ti/p/%40277rcesk" target="_blank" rel="noopener noreferrer">
              <i data-lucide="user-plus" class="w-4 h-4"></i> まず友だち追加
            </a>
            <button class="inline-flex items-center gap-2 px-5 py-3 rounded-2xl bg-[#06C755] text-white font-bold text-sm shadow-lg shadow-green-500/20 transition-all active:scale-95" type="button" id="btnBuild">
              <i data-lucide="sparkles" class="w-4 h-4"></i> この内容で作る
            </button>
          </div>

          <p class="text-[11px] text-muted mt-3">
            ※ 送信日時は入れません（LINE側で分かるため）。
          </p>
        </section>

        <section>
          <h3 class="text-sm font-bold text-muted uppercase tracking-wider mb-4 flex items-center gap-2">
            <span class="w-6 h-6 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[11px] font-bold">③</span>
            確認して送る
          </h3>

          <div id="previewBox" class="hidden">
            <div class="p-5 rounded-2xl border border-white/10 bg-white/[0.03]">
              <div class="text-xs text-muted mb-3 flex items-center gap-2">
                <i data-lucide="message-square" class="w-3 h-3"></i>
                この内容がLINEの入力欄に入ります
              </div>
              <pre id="previewText" class="whitespace-pre-wrap text-sm text-white/80 font-mono leading-relaxed"></pre>

              <div class="flex flex-wrap gap-3 mt-5">
                <button class="inline-flex items-center gap-2 px-4 py-2.5 rounded-xl border border-white/10 bg-white/5 text-white/80 font-bold text-sm hover:bg-white/10 transition-all" type="button" id="btnEdit">
                  <i data-lucide="pencil" class="w-3.5 h-3.5"></i> 修正する
                </button>
                <button class="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-[#06C755] text-white font-bold text-sm shadow-lg shadow-green-500/20 transition-all active:scale-95" type="button" id="btnSend">
                  <i data-lucide="send" class="w-3.5 h-3.5"></i> LINEで送る
                </button>
              </div>

              <p class="text-[11px] text-muted mt-4 border-t border-white/5 pt-3">
                ※ 端末によってLINEが開かない場合は、いったん友だち追加→戻ってもう一度「LINEで送る」を押してください。
              </p>
            </div>
          </div>

          <div id="previewEmpty" class="p-8 rounded-2xl border border-dashed border-white/10 text-center">
            <i data-lucide="file-text" class="w-8 h-8 mx-auto text-white/10 mb-3"></i>
            <p class="text-xs text-muted">「この内容で作る」を押すとプレビューが表示されます</p>
          </div>
        </section>
      </div>
    </div>
  </main>

  <script>
    lucide.createIcons();
    (function(){
      var C = window.CONFIG || {};
      var companyName = document.getElementById('companyName');
      if (companyName && C.COMPANY_NAME) companyName.textContent = C.COMPANY_NAME;

      var mail = (C.EMAIL_TO || '').trim();
      var headerMailLink = document.getElementById('headerMailLink');
      if (headerMailLink && mail) headerMailLink.href = 'mailto:' + mail;

      var addUrl = (C.LINE_URL || 'https://line.me/R/ti/p/%40277rcesk').trim();
      var btnAddFriend = document.getElementById('btnAddFriend');
      if (btnAddFriend) btnAddFriend.href = addUrl;

      function getSelectedType(){
        var el = document.querySelector('input[name="consultType"]:checked');
        return el ? el.value : '';
      }

      function buildMessage(){
        var type = getSelectedType() || '未選択';
        var note = (document.getElementById('note').value || '').trim();
        if (!note) note = '未入力';

        return [
          '【相談カテゴリ】',
          type,
          '',
          '【備考】',
          note
        ].join('\n');
      }

      function openLineWithText(text){
        var msg = encodeURIComponent(String(text || '').slice(0, 5000));
        var oa = (C.LINE_OA_ID || '@277rcesk').trim();
        if (oa[0] !== '@') oa = '@' + oa;
        var isMobile = /iphone|ipad|ipod|android/i.test(navigator.userAgent || '');
        var base = isMobile ? 'line://oaMessage/' : 'https://line.me/R/oaMessage/';
        location.href = base + oa + '/?' + msg;
      }

      var btnBuild = document.getElementById('btnBuild');
      var btnSend = document.getElementById('btnSend');
      var btnEdit = document.getElementById('btnEdit');
      var previewBox = document.getElementById('previewBox');
      var previewText = document.getElementById('previewText');
      var previewEmpty = document.getElementById('previewEmpty');

      function showPreview(){
        var msg = buildMessage();
        previewText.textContent = msg;
        previewBox.classList.remove('hidden');
        if (previewEmpty) previewEmpty.style.display = 'none';
        previewBox.scrollIntoView({behavior:'smooth', block:'start'});
      }

      if (btnBuild) btnBuild.addEventListener('click', showPreview);
      if (btnEdit) btnEdit.addEventListener('click', function(){
        document.getElementById('note').focus();
        document.getElementById('consultCard').scrollIntoView({behavior:'smooth', block:'start'});
      });
      if (btnSend) btnSend.addEventListener('click', function(){
        openLineWithText(buildMessage());
      });
    })();

    document.addEventListener('mousemove', (e) => {
      document.querySelectorAll('.glass-card').forEach(card => {
        const rect = card.getBoundingClientRect();
        card.style.setProperty('--mouse-x', `${e.clientX - rect.left}px`);
        card.style.setProperty('--mouse-y', `${e.clientY - rect.top}px`);
      });
    });

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('reveal-visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.05, rootMargin: "0px 0px -40px 0px" });
    document.querySelectorAll('.reveal-hidden').forEach(el => observer.observe(el));
  </script>
</body>
</html>
