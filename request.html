<!doctype html>
<html lang="ja" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>協力ドライバー｜連絡フォーム</title>
    <meta name="description" content="協力ドライバー向けの連絡フォームです。" />
    <link rel="stylesheet" href="./drivers.css" />
    <script src="./config.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>
  <body class="bg-[#0b0f1a] text-white min-h-screen">
    <header class="site-header" id="top">
      <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="hidden sm:flex region-badge" aria-label="対応地域">
            <div class="region-en" id="regionEn">YAMAGUCHI</div>
            <div class="region-ja" id="regionJa">山口県</div>
          </div>
          <a href="./index.html" class="brand group">
            <div class="brand-mark" aria-hidden="true">
              <span class="brand-mark-inner"></span>
            </div>
            <div>
              <div class="text-sm font-black tracking-wide leading-none" id="companyName">
                軽貨物TAKE
              </div>
              <div class="text-[10px] text-white/50 font-bold mt-0.5">
                DRIVER CONTACT
              </div>
            </div>
          </a>
        </div>

        <div class="hidden lg:flex items-center gap-3 text-xs text-white/60" aria-label="連絡先">
          <a href="#" id="headerLineLink" class="hover:text-white transition-colors">LINE</a>
          <span class="text-white/20">|</span>
          <a href="#" id="headerMailLink" class="hover:text-white transition-colors"
            >takeshimonoseki@gmail.com</a
          >
        </div>
      </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 pt-10 pb-12">
      <div class="glass-card p-6 md:p-8 reveal-hidden">
        <h1 class="text-xl md:text-2xl font-black">協力ドライバーからの連絡</h1>
        <p class="text-sm text-white/60 mt-2">
          まずは要点だけでOKです。あとでこちらから折り返します。
        </p>

        <div class="mt-6">
          <label class="field-label" for="messageBody">内容</label>
          <textarea
            id="messageBody"
            class="field-input"
            rows="8"
            placeholder="例：稼働可能日／エリア／車両／連絡先など"
          ></textarea>
        </div>

        <div class="mt-4 flex flex-col sm:flex-row gap-3">
          <button class="btn btn-line" id="btnLineSend" type="button">
            <i data-lucide="message-circle" class="w-4 h-4"></i> LINEで送る
          </button>
        </div>
      </div>

      <!-- Guidelines -->
      <div class="glass-card p-6 reveal-hidden delay-200 mt-6">
        <h2 class="text-base font-bold mb-3 flex items-center gap-2">
          <i data-lucide="shield-alert" class="w-4 h-4 text-amber-400"></i> 運用上のお願い
        </h2>
        <ul class="space-y-2 text-sm text-white/70">
          <li class="flex items-start gap-2">
            <i data-lucide="x-circle" class="w-3.5 h-3.5 mt-0.5 text-red-400 flex-shrink-0"></i>
            このページから<strong class="text-white">具体的な運賃の交渉や金額提示</strong>は行わないでください。
          </li>
          <li class="flex items-start gap-2">
            <i data-lucide="check-circle" class="w-3.5 h-3.5 mt-0.5 text-green-400 flex-shrink-0"></i>
            案件のご相談は、あくまで<strong class="text-white">代表たけとのやり取りの中</strong>で行います。
          </li>
          <li class="flex items-start gap-2">
            <i data-lucide="x-circle" class="w-3.5 h-3.5 mt-0.5 text-red-400 flex-shrink-0"></i>
            お客さまとの直接のやり取りや、個別の営業連絡にこのページを使うことはお控えください。
          </li>
        </ul>
      </div>

      <footer class="border-t border-white/5 mt-12 pt-8 pb-4 text-center">
        <div class="text-xs text-muted" id="footerCompany">
          drivers-site｜協力ドライバー登録プール（山口県）
        </div>
        <div class="text-[11px] text-white/30 mt-1">
          このページは、ドライバーさん側から代表たけへの連絡専用ページです。
        </div>
      </footer>
    </main>

    <script>
      lucide.createIcons();

      // CONFIG からヘッダー・フッター情報を反映
      (function applyConfig() {
        if (!window.CONFIG) return;
        var regionJa = document.getElementById("regionJa");
        var regionEn = document.getElementById("regionEn");
        var companyName = document.getElementById("companyName");
        var footerCompany = document.getElementById("footerCompany");

        if (regionJa) regionJa.textContent = window.CONFIG.REGION_LABEL || "山口県";
        if (regionEn) regionEn.textContent = (window.CONFIG.REGION_CODE || "YAMAGUCHI").toUpperCase();
        if (companyName) companyName.textContent = window.CONFIG.COMPANY_NAME || "軽貨物TAKE";
        if (footerCompany) {
          footerCompany.textContent =
            (window.CONFIG.COMPANY_NAME || "drivers-site") +
            "｜協力ドライバー登録プール（" +
            (window.CONFIG.REGION_LABEL || "山口県") +
            "）";
        }

        var lineLink = document.getElementById("headerLineLink");
        var mailLink = document.getElementById("headerMailLink");

        var lineUrl = window.CONFIG.LINE_ADD_FRIEND_URL || window.CONFIG.LINE_URL || "";
        var email = window.CONFIG.EMAIL_TO || "";

        if (lineLink && lineUrl) lineLink.href = lineUrl;
        if (mailLink && email) {
          mailLink.href = "mailto:" + email;
          mailLink.textContent = email;
        }
      })();

      function openLineWithText(text) {
        var base = "https://line.me/R/msg/text/";
        var url = base + "?" + encodeURIComponent(text.slice(0, 5000));
        window.open(url, "_blank", "noopener,noreferrer");
      }

      document.getElementById("btnLineSend").addEventListener("click", function () {
        var body = document.getElementById("messageBody").value.trim();
        var lines = [];
        lines.push("【協力ドライバーからの連絡】");
        if (body) {
          lines.push(body);
        } else {
          lines.push("（本文は空欄のまま送信しました。内容はトークでお伝えします。）");
        }
        var text = lines.join("\n");
        openLineWithText(text);
      });

      // Spotlight
      document.addEventListener("mousemove", (e) => {
        document.querySelectorAll(".glass-card").forEach((card) => {
          const r = card.getBoundingClientRect();
          card.style.setProperty("--mouse-x", `${e.clientX - r.left}px`);
          card.style.setProperty("--mouse-y", `${e.clientY - r.top}px`);
        });
      });
      // Reveal
      const obs = new IntersectionObserver(
        (e) =>
          e.forEach((en) => {
            if (en.isIntersecting) {
              en.target.classList.add("reveal-visible");
              obs.unobserve(en.target);
            }
          }),
        { threshold: 0.05 },
      );
      document.querySelectorAll(".reveal-hidden").forEach((el) => obs.observe(el));
    </script>
  </body>
</html>
